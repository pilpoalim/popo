{"swagger":"2.0","info":{"description":"The IBGN MVP API documentation","version":"0.1","title":"IBGN MVP"},"basePath":"/","tags":[],"schemes":["http"],"securityDefinitions":{"bearer":{"type":"apiKey","name":"Authorization","in":"header"}},"paths":{"/auth/token":{"post":{"summary":"Get access and identity tokens","parameters":[{"name":"AuthenticationRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/AuthenticationRequest"}}],"responses":{"201":{"description":"Access and identity token have succesfully been created for the given user credentials.","schema":{"$ref":"#/definitions/AuthenticationResponse"}},"400":{"description":"Incorrect credentials."}},"tags":["Authentication"],"produces":["application/json"],"consumes":["application/json"]}},"/auth/register":{"post":{"summary":"Register a new user in the directory","parameters":[{"name":"RegisterUser","required":true,"in":"body","schema":{"$ref":"#/definitions/RegisterUser"}}],"responses":{"201":{"description":"New user has been registered.","schema":{"type":"object"}},"400":{"description":"Incorrect input."}},"tags":["Authentication"],"produces":["application/json"],"consumes":["application/json"]}},"/chaincode/query/{transactionName}":{"post":{"summary":"Query a chaincode transaction.","parameters":[{"name":"ChaincodeRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/ChaincodeRequest"}},{"type":"string","name":"transactionName","required":true,"in":"path"}],"responses":{"200":{"description":"Chaincode transaction successfully submitted.","schema":{"$ref":"#/definitions/GenericResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Chaincode (DEV ONLY)"],"produces":["application/json"],"consumes":["application/json"]}},"/chaincode/invoke/{transactionName}":{"post":{"summary":"Invoke a chaincode transaction.","parameters":[{"name":"ChaincodeRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/ChaincodeRequest"}},{"type":"string","name":"transactionName","required":true,"in":"path"}],"responses":{"200":{"description":"Chaincode transaction successfully submitted.","schema":{"$ref":"#/definitions/GenericResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Chaincode (DEV ONLY)"],"produces":["application/json"],"consumes":["application/json"]}},"/guarantees":{"post":{"summary":"Create a new guarantee.","parameters":[{"name":"CreateGuaranteeRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/CreateGuaranteeRequest"}}],"responses":{"200":{"description":"Guarantee created.","schema":{"$ref":"#/definitions/GuaranteeResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"get":{"summary":"Get all guarantees for current user. Option to query by state.","parameters":[{"type":"string","name":"state","required":false,"in":"query"}],"responses":{"200":{"description":"A list of guarantees.","schema":{"type":"array","items":{"$ref":"#/definitions/GuaranteesResponse"}}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/guarantees/{id}":{"get":{"summary":"Get a guarantee by id.","parameters":[{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"The guarantee matching the id.","schema":{"$ref":"#/definitions/GuaranteeResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"put":{"summary":"Update a guarantee (update, exercise, cancel).","parameters":[{"name":"UpdateGuaranteeRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/UpdateGuaranteeRequest"}},{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"The updated guarantee.","schema":{"$ref":"#/definitions/GuaranteeResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/guarantees/{id}/activate":{"post":{"summary":"Activate a guarantee.","parameters":[{"name":"ActivateGuaranteeRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/ActivateGuaranteeRequest"}},{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"The activated guarantee.","schema":{"$ref":"#/definitions/GuaranteeResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/guarantees/ga/{guaranteeCode}/{guaranteedNum}/{guaranteedType}/{guaranteedID}":{"get":{"summary":"Get a guarantee by code - for GA","parameters":[{"type":"string","name":"guaranteedID","required":true,"in":"path"},{"type":"string","name":"guaranteedType","required":true,"in":"path"},{"type":"string","name":"guaranteedNum","required":true,"in":"path"},{"type":"string","name":"guaranteeCode","required":true,"in":"path"}],"responses":{"200":{"description":"The guarantee matching the code.","schema":{"$ref":"#/definitions/GuaranteeResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/guarantees/ga/{guaranteeCode}/activate":{"post":{"summary":"Activate GA guarantee by code","parameters":[{"name":"GAActivateGuaranteeRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/GAActivateGuaranteeRequest"}},{"type":"string","name":"guaranteeCode","required":true,"in":"path"}],"responses":{"200":{"description":"The activated GA guarantee.","schema":{"$ref":"#/definitions/GuaranteeResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/guarantees/ga/{guaranteeId}/feedback":{"post":{"summary":"Update GA guarantee feedback by code","parameters":[{"name":"GAGuaranteeFeedbackRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/GAGuaranteeFeedbackRequest"}},{"type":"string","name":"guaranteeId","required":true,"in":"path"}],"responses":{"200":{"description":"The activated GA guarantee.","schema":{"$ref":"#/definitions/GuaranteeResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Guarantees"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/users/login":{"post":{"parameters":[{"name":"LoginRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/LoginRequest"}}],"responses":{"201":{"description":""}},"tags":["Users"],"produces":["application/json"],"consumes":["application/json"]}},"/users/register":{"post":{"parameters":[{"name":"RegisterRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/RegisterRequest"}}],"responses":{"201":{"description":""}},"tags":["Users"],"produces":["application/json"],"consumes":["application/json"]}},"/requests":{"post":{"summary":"Create a new request to update a guarantee.","parameters":[{"name":"CreateRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/CreateRequest"}}],"responses":{"200":{"description":"The created request.","schema":{"$ref":"#/definitions/RequestResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Requests"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"get":{"summary":"Get all requests for current user. Option to query by state.","parameters":[{"type":"string","name":"state","required":false,"in":"query"}],"responses":{"200":{"description":"A list of requests.","schema":{"type":"array","items":{"$ref":"#/definitions/RequestsResponse"}}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Requests"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/requests/{id}":{"get":{"summary":"Get a request by id.","parameters":[{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"A request.","schema":{"$ref":"#/definitions/RequestResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Requests"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"put":{"summary":"Approve or reject a request.","parameters":[{"name":"UpdateRequest","required":true,"in":"body","schema":{"$ref":"#/definitions/UpdateRequest"}},{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"A request.","schema":{"$ref":"#/definitions/RequestResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Requests"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/demo/cleanup":{"post":{"summary":"Clean up any existing assets of given types.","parameters":[{"name":"DemoCleanup","required":true,"in":"body","schema":{"$ref":"#/definitions/DemoCleanup"}}],"responses":{"200":{"description":"Demo cleanup was successful.","schema":{"$ref":"#/definitions/GenericResponse"}},"400":{"description":"Bad Request.","schema":{"$ref":"#/definitions/Error"}}},"tags":["Demo (FOR DEMO PURPOSES ONLY)"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}}},"definitions":{"AuthenticationRequest":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"]},"AuthenticationResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"idToken":{"type":"string"},"tokenType":{"type":"string"},"expiresIn":{"type":"number"}},"required":["accessToken","idToken","tokenType","expiresIn"]},"TokenAttributes":{"type":"object","properties":{"role":{"type":"string"},"partyId":{"type":"string"},"org":{"type":"string"}},"required":["role","partyId","org"]},"RegisterUser":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"attributes":{"$ref":"#/definitions/TokenAttributes"}},"required":["email","password","attributes"]},"ChaincodeCredentials":{"type":"object","properties":{"role":{"type":"string","description":"The role to act as for the transaction"},"org":{"type":"string","description":"Organisation to act as for the transaction"}},"required":["role","org"]},"ChaincodeRequest":{"type":"object","properties":{"credentials":{"title":"ChaincodeCredentials","allOf":[{"$ref":"#/definitions/ChaincodeCredentials"},{"description":"Credential information to use for transaction"}]},"args":{"type":"array","description":"Arguments for chaincode transaction","items":{"type":"string"}}},"required":["credentials","args"]},"ChaincodeError":{"type":"object","properties":{"code":{"type":"string"},"message":{"type":"string"}},"required":["code","message"]},"GenericResponse":{"type":"object","properties":{"success":{"type":"boolean"},"result":{"type":"object"},"error":{"$ref":"#/definitions/ChaincodeError"}},"required":["success","result","error"]},"Error":{"type":"object","properties":{}},"Document":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"type":{"type":"string","enum":["PDF","XML","UNKNOWN"]},"checksum":{"type":"string"},"reference":{"type":"string"},"serialized":{"type":"string"}},"required":["id","name","type","checksum"]},"Party":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"fullName":{"type":"string"}},"required":["id","type","fullName"]},"BankGuarantee":{"type":"object","properties":{"agreementSerialId":{"type":"string"},"bankNumber":{"type":"string"},"branchNumber":{"type":"string"},"accountNumber":{"type":"string"},"guaranteeSerialId":{"type":"string"},"subagreementSerialId":{"type":"string"},"guaranteeValidityStartDate":{"type":"string"},"guaranteeValidityEndDate":{"type":"string"},"demandPossibleEarlyDate":{"type":"string"},"agreementStatusCode":{"type":"string"},"agreementStatusDesc":{"type":"string"},"agreementStatusDate":{"type":"string"},"guaranteeFundAmt":{"type":"string"},"guaranteePurposeCode":{"type":"string"},"guaranteePurposeDesc":{"type":"string"},"guaranteePurposeText":{"type":"string"},"originAgreementDetails":{"type":"string"},"originProjectDetails":{"type":"string"},"linkageMethodCode":{"type":"string"},"linkageMethodDescription":{"type":"string"},"indexTypeCode":{"type":"string"},"indexTypeDescription":{"type":"string"},"currencyCode":{"type":"string"},"linkageAmountCurrencyDescription":{"type":"string"},"customer":{"type":"array","items":{"$ref":"#/definitions/Party"}},"garentor":{"type":"array","items":{"$ref":"#/definitions/Party"}},"beneficiary":{"type":"array","items":{"$ref":"#/definitions/Party"}}},"required":["agreementSerialId","bankNumber","branchNumber","accountNumber","guaranteeSerialId","subagreementSerialId","guaranteeValidityStartDate","guaranteeValidityEndDate","demandPossibleEarlyDate","agreementStatusCode","agreementStatusDesc","agreementStatusDate","guaranteeFundAmt","guaranteePurposeCode","guaranteePurposeDesc","guaranteePurposeText","originAgreementDetails","originProjectDetails","linkageMethodCode","linkageMethodDescription","indexTypeCode","indexTypeDescription","currencyCode","linkageAmountCurrencyDescription","customer","garentor","beneficiary"]},"CreateGuaranteeRequest":{"type":"object","properties":{"activationCode":{"type":"string"},"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}},"bankGuarantee":{"$ref":"#/definitions/BankGuarantee"}},"required":["activationCode","bankGuarantee"]},"Message":{"type":"object","properties":{"code":{"type":"string"},"message":{"type":"string"}},"required":["code","message"]},"AuditLogEntry":{"type":"object","properties":{"date":{"type":"string"},"type":{"type":"string","enum":["GUARANTEE_CREATED","GUARANTEE_ACTIVE","GUARANTEE_PENDING","GUARANTEE_CANCELED","GUARANTEE_EXERCISED","GUARANTEE_UPDATED","REQUEST_CREATED","REQUEST_APPROVED","REQUEST_REJECTED","REQUEST_DONE"]},"identity":{"type":"string"},"partyId":{"type":"string"},"message":{"$ref":"#/definitions/Message"}},"required":["date","type","identity","partyId"]},"Guarantee":{"type":"object","properties":{"activationCode":{"type":"string"},"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}},"id":{"type":"string"},"assetType":{"type":"string","enum":["GUARANTEE","REQUEST"]},"auditLog":{"type":"array","items":{"$ref":"#/definitions/AuditLogEntry"}},"state":{"type":"string","enum":["ISSUED","ACTIVE","PENDING","CANCELED","EXPIRED","EXERCISED"]},"agreementSerialId":{"type":"string"},"bankNumber":{"type":"string"},"branchNumber":{"type":"string"},"accountNumber":{"type":"string"},"guaranteeSerialId":{"type":"string"},"beneficiary":{"type":"array","items":{"$ref":"#/definitions/Party"}},"bankGuarantee":{"$ref":"#/definitions/BankGuarantee"}},"required":["activationCode","id","assetType","auditLog","state","agreementSerialId","bankNumber","branchNumber","accountNumber","guaranteeSerialId","beneficiary"]},"GuaranteeResponse":{"type":"object","properties":{"success":{"type":"boolean"},"result":{"$ref":"#/definitions/Guarantee"},"error":{"$ref":"#/definitions/ChaincodeError"}},"required":["success","result","error"]},"GuaranteesResponse":{"type":"object","properties":{"success":{"type":"boolean"},"result":{"type":"array","items":{"$ref":"#/definitions/Guarantee"}},"error":{"$ref":"#/definitions/ChaincodeError"}},"required":["success","result","error"]},"ActivateGuaranteeRequest":{"type":"object","properties":{"activationCode":{"type":"string","description":"The activation code for the guarantee"}},"required":["activationCode"]},"UpdateGuaranteeRequest":{"type":"object","properties":{"action":{"type":"string","enum":["exercise","cancel","execute"]},"bankGuarantee":{"$ref":"#/definitions/BankGuarantee"}},"required":["action","bankGuarantee"]},"GAActivateGuaranteeRequest":{"type":"object","properties":{"guaranteedNum":{"type":"string","description":"Customer Party Id -  9 digits"},"guaranteedType":{"type":"string","description":"Customer Type [301,302,303]"},"guaranteedID":{"type":"string","description":"ID Type [301,302,303,304]"}},"required":["guaranteedNum","guaranteedType","guaranteedID"]},"GAGuaranteeFeedbackRequest":{"type":"object","properties":{"guaranteeCode":{"type":"string","description":"The guaranteeCode"},"changeNum":{"type":"string","description":"The ChangeNum"},"statusNum":{"type":"string","description":"The StatusNum 400,401,499"},"contactInfo":{"type":"string","description":"The ContactInfo"},"guaranteeFile":{"type":"string","description":"The GuaranteeFile"},"defectCode":{"type":"string","description":"The DefectCode"},"remark":{"type":"string","description":"The Remark"}},"required":["guaranteeCode","changeNum","statusNum","contactInfo","guaranteeFile","defectCode","remark"]},"LoginRequest":{"type":"object","properties":{"username":{"type":"string","description":"The login username"},"password":{"type":"string","description":"The login password"},"org":{"type":"string","description":"The login organisation"}},"required":["username","password","org"]},"RegisterRequest":{"type":"object","properties":{"username":{"type":"string","description":"The register username"},"org":{"type":"string","description":"The register organisation"}},"required":["username","org"]},"RequestDetails":{"type":"object","properties":{"guaranteeValidityEndDate":{"type":"string"},"agreementStatusCode":{"type":"string"},"agreementStatusDesc":{"type":"string"},"guaranteeFundAmt":{"type":"string"},"guaranteePurposeCode":{"type":"string"},"guaranteePurposeDesc":{"type":"string"},"guaranteePurposeText":{"type":"string"}}},"CreateRequest":{"type":"object","properties":{"guaranteeId":{"type":"string"},"type":{"type":"string","enum":["CHANGE_DATE","CHANGE_CLASSIFICATION","EDIT_MISTAKE","EXERCISE_GUARANTEE","INCREASE_AMOUNT","REDUCE_AMOUNT","CANCEL_GUARANTEE"]},"details":{"$ref":"#/definitions/RequestDetails"}},"required":["guaranteeId","type"]},"Request":{"type":"object","properties":{"guaranteeId":{"type":"string"},"type":{"type":"string","enum":["CHANGE_DATE","CHANGE_CLASSIFICATION","EDIT_MISTAKE","EXERCISE_GUARANTEE","INCREASE_AMOUNT","REDUCE_AMOUNT","CANCEL_GUARANTEE"]},"details":{"$ref":"#/definitions/RequestDetails"},"id":{"type":"string"},"assetType":{"type":"string","enum":["GUARANTEE","REQUEST"]},"auditLog":{"type":"array","items":{"$ref":"#/definitions/AuditLogEntry"}},"state":{"type":"string","enum":["INITIATED","APPROVED","REJECTED","DONE"]},"bankNumber":{"type":"string"},"branchNumber":{"type":"string"},"availableActions":{"type":"array","items":{"type":"string","enum":["approve","reject","execute","exercise","cancel"]}},"currentOwners":{"type":"array","items":{"$ref":"#/definitions/Party"}},"customer":{"type":"array","items":{"$ref":"#/definitions/Party"}},"beneficiary":{"type":"array","items":{"$ref":"#/definitions/Party"}}},"required":["guaranteeId","type","id","assetType","auditLog","state","bankNumber","branchNumber","availableActions","currentOwners","customer","beneficiary"]},"RequestResponse":{"type":"object","properties":{"success":{"type":"boolean"},"result":{"type":"array","items":{"$ref":"#/definitions/Request"}},"error":{"$ref":"#/definitions/ChaincodeError"}},"required":["success","result","error"]},"RequestsResponse":{"type":"object","properties":{"success":{"type":"boolean"},"result":{"type":"array","items":{"$ref":"#/definitions/Request"}},"error":{"$ref":"#/definitions/ChaincodeError"}},"required":["success","result","error"]},"UpdateRequest":{"type":"object","properties":{"action":{"type":"string","enum":["approve","reject"]}},"required":["action"]},"DemoCleanup":{"type":"object","properties":{"assetTypes":{"type":"array","items":{"type":"string","enum":["GUARANTEE","REQUEST"]}}},"required":["assetTypes"]}}}
